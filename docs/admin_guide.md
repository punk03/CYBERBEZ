# Руководство администратора PROKVANT

## Установка и настройка

### Требования

- Ubuntu Server 24.04
- Docker и Docker Compose
- Python 3.11+
- Минимум 8GB RAM
- Минимум 100GB свободного места на диске

### Установка

1. Клонировать репозиторий
2. Скопировать `.env.example` в `.env`
3. Настроить переменные окружения
4. Запустить `docker-compose up -d`
5. Установить Python зависимости: `pip install -r backend/requirements.txt`
6. Применить миграции БД
7. Запустить приложение

### Конфигурация

Основные настройки в файле `.env`:

- Database credentials
- Kafka settings
- Redis settings
- Security settings
- Integration settings

## Управление сервисами

### Запуск сервисов

```bash
docker-compose up -d
```

### Остановка сервисов

```bash
docker-compose down
```

### Просмотр логов

```bash
docker-compose logs -f [service_name]
```

## Резервное копирование

### Автоматическое резервное копирование

Настроить cron job:
```bash
0 2 * * * /path/to/scripts/backup.sh
```

### Ручное резервное копирование

```bash
./scripts/backup.sh
```

### Восстановление

```bash
./scripts/restore.sh /path/to/backup.tar.gz
```

## Мониторинг

### Prometheus метрики

Метрики доступны по адресу: `http://localhost:8000/metrics`

### Health checks

```bash
curl http://localhost:8000/api/v1/health
```

## Обслуживание

### Обновление системы

1. Остановить сервисы
2. Создать бэкап
3. Обновить код
4. Обновить зависимости
5. Применить миграции
6. Запустить сервисы

### Очистка старых данных

Настроить retention policies в TimescaleDB и MongoDB.

## Безопасность

### Управление секретами

Использовать переменные окружения или секрет-менеджер (Vault).

### Обновление сертификатов

Регулярно обновлять SSL/TLS сертификаты.

### Аудит

Проверять аудит логи регулярно:
```bash
curl http://localhost:8000/api/v1/audit
```

## Устранение неполадок

### Проблемы с БД

1. Проверить подключение
2. Проверить логи
3. Проверить дисковое пространство

### Проблемы с Kafka

1. Проверить статус Zookeeper
2. Проверить логи Kafka
3. Проверить дисковое пространство

### Проблемы с производительностью

1. Проверить метрики Prometheus
2. Проверить использование ресурсов
3. Масштабировать компоненты при необходимости

## Контакты

- Техническая поддержка: [указать]
- Документация: `docs/`
